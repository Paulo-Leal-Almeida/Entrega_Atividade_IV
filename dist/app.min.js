(function(){ const views = { "#/": ` <section class="hero fade-in" aria-labelledby="homeTitle"> <div class="hero-inner"> <div> <h2 id="homeTitle">Aumigo — Proteção, Adoção e Amor</h2> <p class="lead">Conectamos pessoas a animais que precisam de um lar. Junte-se a nossas campanhas de adoção, castração e resgate.</p> <p><button class="btn" data-action="to-projects">Conheça os projetos</button> <button class="btn-outline" data-action="to-cadastro">Quero Ajudar</button></p> </div> <div><img src="https: </div> </section> <section class="projects-grid fade-in" aria-label="Impacto"> <div class="project-card"><img src="https: <div class="project-card"><img src="https: <div class="project-card"><img src="https: </section> `, "#/projetos": ` <section class="fade-in" aria-label="Projetos"> <h1>Projetos em Andamento</h1> <div class="projects-grid"> <article class="project-card"><img src="https: <article class="project-card"><img src="https: <article class="project-card"><img src="https: </div> </section> `, "#/cadastro": ` <section class="fade-in" aria-label="Cadastro"> <h1>Cadastro de Voluntário / Doador</h1> <form id="registro" novalidate aria-describedby="form-status" aria-live="polite"> <fieldset> <legend>Dados Pessoais</legend> <label for="nome">Nome completo *</label> <input id="nome" name="nome" type="text" required minlength="3" aria-required="true"> <span class="error-msg" id="err-nome">Por favor, insira seu nome completo (mín. 3 caracteres).</span> <label for="email">Email *</label> <input id="email" name="email" type="email" required aria-required="true"> <span class="error-msg" id="err-email">Email inválido.</span> <label for="cpf">CPF *</label> <input id="cpf" name="cpf" type="text" inputmode="numeric" placeholder="000.000.000-00" maxlength="14" required> <span class="error-msg" id="err-cpf">CPF inválido.</span> <label for="telefone">Telefone *</label> <input id="telefone" name="telefone" type="tel" inputmode="tel" placeholder="(00) 00000-0000" maxlength="15" required> <span class="error-msg" id="err-tel">Telefone inválido.</span> <label for="nascimento">Data de nascimento *</label> <input id="nascimento" name="nascimento" type="date" required> <span class="error-msg" id="err-nasc">Data inválida.</span> </fieldset> <fieldset> <legend>Endereço</legend> <label for="cep">CEP *</label> <input id="cep" name="cep" type="text" inputmode="numeric" placeholder="00000-000" maxlength="9" required> <span class="error-msg" id="err-cep">CEP inválido.</span> <label for="endereco">Endereço</label> <input id="endereco" name="endereco" type="text" required> <label for="cidade">Cidade</label> <input id="cidade" name="cidade" type="text" required> <label for="estado">Estado</label> <select id="estado" name="estado" required> <option value="">Selecione</option> <option value="SP">São Paulo</option> <option value="RJ">Rio de Janeiro</option> <option value="MG">Minas Gerais</option> <option value="ES">Espírito Santo</option> <option value="OUTROS">Outros</option> </select> </fieldset> <fieldset> <legend>Contribuição</legend> <label><input type="radio" name="perfil" value="voluntario" checked> Voluntário</label> <label><input type="radio" name="perfil" value="doador"> Doador</label> <label for="horario">Disponibilidade</label> <select id="horario" name="horario" required> <option value="">Selecione</option> <option value="manha">Manhã</option> <option value="tarde">Tarde</option> <option value="noite">Noite</option> </select> <label for="obs">Observações</label> <textarea id="obs" name="obs" rows="3"></textarea> <label><input type="checkbox" id="termos" required> Declaro que li e aceito os termos.</label> </fieldset> <div class="form-actions" style="margin-top:12px;display:flex;gap:8px;"> <button class="btn" type="submit">Enviar cadastro</button> <button class="btn-outline" type="reset" id="btnReset">Limpar</button> </div> <div id="form-status" role="status" aria-live="polite" style="margin-top:12px;font-weight:700"></div> </form> </section> ` }; const router = { routes: views, render: function(hash){ const view = this.routes[hash] || this.routes["#/"]; const app = document.getElementById("app"); app.innerHTML = view; document.getElementById("main").focus(); attachUI(); document.querySelectorAll("[data-link]").forEach(a=>{ a.classList.toggle("active", a.getAttribute("href")===hash); }); } }; function attachUI(){ document.querySelectorAll("[data-action]").forEach(btn=>{ btn.addEventListener("click", e=>{ const act = btn.getAttribute("data-action"); if(act==="to-projects") location.hash="#/projetos"; if(act==="to-cadastro") location.hash="#/cadastro"; }); }); const hb = document.getElementById("hamburgerBtn"); const navList = document.getElementById("navList"); if(hb){ hb.addEventListener("click", ()=>{ const open = navList.classList.toggle("open"); hb.setAttribute("aria-expanded", open ? "true" : "false"); }); } const themeToggle = document.getElementById("themeToggle"); const contrastToggle = document.getElementById("contrastToggle"); if(themeToggle) themeToggle.onclick = ()=> document.documentElement.classList.toggle("dark-mode"); if(contrastToggle) contrastToggle.onclick = ()=> document.documentElement.classList.toggle("high-contrast"); const masks = { cpf: v => v.replace(/\D/g,'').replace(/(\d{3})(\d)/,'$1.$2').replace(/(\d{3})(\d)/,'$1.$2').replace(/(\d{3})(\d{1,2})$/,'$1-$2'), tel: v => { v = v.replace(/\D/g,''); if(v.length>10) return v.replace(/^(\d{2})(\d{5})(\d{4}).*/,'($1) $2-$3'); return v.replace(/^(\d{2})(\d{4})(\d{0,4}).*/,'($1) $2-$3'); }, cep: v => v.replace(/\D/g,'').replace(/^(\d{5})(\d)/,'$1-$2') }; ["cpf","telefone","cep"].forEach(id=>{ const el = document.getElementById(id); if(el){ el.addEventListener("input", e=> e.target.value = masks[id==="telefone"?"tel":id](e.target.value)); } }); const form = document.getElementById("registro"); if(form){ form.addEventListener("submit", function(e){ e.preventDefault(); let isValid = true; const status = document.getElementById("form-status"); status.textContent = ""; form.querySelectorAll(".error").forEach(el=>el.classList.remove("error")); if(form.nome.value.trim().length < 3){ document.getElementById("nome").classList.add("error"); isValid=false; } if(!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(form.email.value)){ document.getElementById("email").classList.add("error"); isValid=false; } if(!validaCPF(form.cpf.value)){ document.getElementById("cpf").classList.add("error"); isValid=false; } if(form.telefone.value.replace(/\\D/g,'').length < 10){ document.getElementById("telefone").classList.add("error"); isValid=false; } if(form.cep.value.replace(/\\D/g,'').length < 8){ document.getElementById("cep").classList.add("error"); isValid=false; } if(!form.endereco.value) { document.getElementById("endereco").classList.add("error"); isValid=false; } if(!form.cidade.value) { document.getElementById("cidade").classList.add("error"); isValid=false; } if(!form.estado.value) { document.getElementById("estado").classList.add("error"); isValid=false; } if(!form.nascimento.value) { document.getElementById("nascimento").classList.add("error"); isValid=false; } if(!form.termos.checked){ document.getElementById("termos").classList.add("error"); isValid=false; } if(isValid){ status.style.color = "green"; status.textContent = "Cadastro realizado com sucesso! Entraremos em contato."; form.reset(); } else { status.style.color = "var(--accent)"; status.textContent = "Verifique os campos destacados."; const firstErr = form.querySelector(".error"); if(firstErr) firstErr.focus(); } }); const btnReset = document.getElementById("btnReset"); if(btnReset) btnReset.addEventListener("click", ()=> { form.querySelectorAll(".error").forEach(el=>el.classList.remove("error")); document.getElementById("form-status").textContent = ""; }); form.querySelectorAll("input,select,textarea").forEach(el=>{ el.addEventListener("input", ()=> el.classList.remove("error")); }); } } function validaCPF(cpf){ cpf = (cpf || '').replace(/[^\d]+/g,''); if(cpf.length !== 11) return false; if(/^(\d)\1+$/.test(cpf)) return false; let sum = 0, rest; for(let i=1;i<=9;i++) sum += parseInt(cpf.substring(i-1,i)) * (11 - i); rest = (sum * 10) % 11; if(rest === 10) rest = 0; if(rest !== parseInt(cpf.substring(9,10))) return false; sum = 0; for(let i=1;i<=10;i++) sum += parseInt(cpf.substring(i-1,i)) * (12 - i); rest = (sum * 10) % 11; if(rest === 10) rest = 0; if(rest !== parseInt(cpf.substring(10,11))) return false; return true; } function boot(){ const hash = location.hash || "#/"; router.render(hash); document.getElementById("year").textContent = new Date().getFullYear(); const brand = document.getElementById("brandTitle"); if(brand) brand.addEventListener("keydown", e=> { if(e.key === "Enter" || e.key === " ") location.hash="#/"; }); const skip = document.querySelector(".skip-link"); if(skip) skip.addEventListener("click", ()=> document.getElementById("main").focus()); const hb = document.getElementById("hamburgerBtn"); if(hb) hb.addEventListener("keydown", e=> { if(e.key === "Enter" || e.key === " ") hb.click(); }); } window.addEventListener("hashchange", ()=> router.render(location.hash || "#/")); boot(); })();